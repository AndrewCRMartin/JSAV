<DOCTYPE html>
<html lang="en">
<head>
<title>JSAV</title>

<!-- JQuery and JQuery-UI -->
<link href="../external/jquery.css" rel="stylesheet" />
<script type='text/javascript' src='../external/jquery-1.10.2.min.js'></script>
<script type='text/javascript' src='../external/jquery-ui-1.10.4.custom.min.js'></script>

<!-- JSAV -->
<link href="../JSAV.css" rel="stylesheet" />
<script type='text/javascript' src='../JSAV.min.js'></script>

<style>
p, label {font: 12pt Arial,Helvetica,sans-serif;
   color: #3333AA;
}
</style>

</head>

<body>
<script type='text/javascript'>
var MySeqs = [];

MySeqs.push({ id:"id1b1.L",  sequence:"SASSSVNYMYACREFGHIKLMNPTRSTVWY", Data_Score:"0.625", Data_Chemist:"PeterS", Tested:"Yes"});
MySeqs.push({ id:"id1a.L",   sequence:"SASSSTNYMYACDEFGHIKLMNPQRSTVWY", Data_Score:"0.291", Data_Chemist:"JeffC", Tested:"Yes"});
MySeqs.push({ id:"id2b1.L",  sequence:"SASSTCNYMTACDEEGHIKLMNP-RSTCWY", Data_Score:"0.550", Data_Chemist:"JeffC", Tested:"Yes"});
MySeqs.push({ id:"id2a.L",   sequence:"SASSSCNYMTLCDEHGHIKLMNP-RSTCWY", Data_Score:"0.223", Data_Chemist:"PeterS", Tested:"No"});
MySeqs.push({ id:"id2a1.L",  sequence:"SASSSCNYMTLCDEHGHIKLMNPQRSTCWY", Data_Score:"0.383", Data_Chemist:"RogerW", Tested:"Yes"});
MySeqs.push({ id:"id1.L",    sequence:"SASSSVNYMYACDEFGHIKLMNPQRSTVWY", Data_Score:"0.217", Data_Chemist:"JeffC", Tested:"Yes"});
MySeqs.push({ id:"id1b.L",   sequence:"SASSSVNYMYACREFGHIKLMNPQRSTVWY", Data_Score:"0.124", Data_Chemist:"PeterS", Tested:"No"});
MySeqs.push({ id:"id1a1.L",  sequence:"SASSSTNYMYLCDEFGHIKLMNPQRSTVWY", Data_Score:"0.269", Data_Chemist:"RogerW", Tested:"Yes"});
MySeqs.push({ id:"id2.L",    sequence:"SASSSCNYMTACDEHGHIKLMNP-RSTCWY", Data_Score:"0.323", Data_Chemist:"TerryC", Tested:"Yes"});
MySeqs.push({ id:"id2b.L",   sequence:"SASSTCNYMTACDEHGHIKLMNP-RSTCWY", Data_Score:"0.546", Data_Chemist:"TerryC", Tested:"Yes"});
</script>

<h1>JavaScript Sequence Alignment Viewer (JSAV)</h1>
<p>JSAV is a JavaScript program to display and sort a sequence
  alignment. The sorting method chooses a representative sequence (one
  which is most similar to all the other sequences) placing that first
  in the list. To add to the sorted list, it iteratively chooses the
  sequences that are most similar to the last one in the list and, of
  those chooses the sequence most similar to the representative
  sequence.</p>

<p>Sequences are:</p>
<div id='sequenceDisplay'>
</div>

<p>Data Table:</p>
<div id='sequenceDisplay_Table'>
</div>

<script type='text/javascript'>
function myAction(divId, sequences)
{
   var seqString = "";
   for(var i=0; i<sequences.length; i++)
   {
       seqString += ">" + sequences[i].id + "\n";
       seqString += sequences[i].sequence + "\n\n";
   }
   alert(seqString);
}

var MyOptions = Array();
MyOptions.displaydatatable = true;
MyOptions.defaultVisibleColumns = ['Data_Score','Data_Chemist'];
MyOptions.sortable = true;
MyOptions.selectable = true;
MyOptions.deletable = true;
MyOptions.exportable = true;
MyOptions.border = false;
MyOptions.highlight = [3,5,10,14];
MyOptions.submit = "http://www.bioinf.org.uk/cgi-bin/echo.pl";
MyOptions.action = "myAction";
MyOptions.toggleDotify = true;
MyOptions.toggleNocolour = true;
MyOptions.fasta = true;
MyOptions.consensus = true;
MyOptions.colourScheme = "taylor";
MyOptions.selectColour = true;
MyOptions.idSubmit = "http://www.bioinf.org.uk/cgi-bin/echo.pl";
MyOptions.idSubmitKey = "id:seq";
MyOptions.idSubmitAttribute = "id:sequence";
MyOptions.idSubmitClean = true;
MyOptions.autoLabels = true;

printJSAV('sequenceDisplay', MySeqs, MyOptions);
</script>
<div style='padding-top:20px'>
<p>Input to the JavaScript is simply an array of sequences and data items in
  the form:</p>
<pre>
sequences[0] = { id :"id1b1.L",  sequence :"SASSSVNYMYACREFGHIKLMNPTRSTVWY", "Data_Score:"0.635", Data_Chemist:"PeterS", Tested:"Yes"};
</pre>
<p>in which the data labels (e.g. 'Data_Score') are user-defined. Any number of data items can be included, 
 and missing data is allowed. Data labels containing spaces must be enclosed in quotation marks.
 Data items can be grouped by including an underscore after the group name - as in the 'Data' group in the example. 
 The display and sorter is created with</p>
<pre>
printJSAV('sequenceDisplay', sequences, options);
sequenceDisplay - div in which to display the viewer
sequences       - array of sequence objects
options         - an object describing options
</pre>
</div>

</body>
</html>
